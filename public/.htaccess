
RewriteEngine On
RewriteBase /

# Redirection 301 de non-www vers www
RewriteCond %{HTTP_HOST} ^logo-foot\.com$ [NC]
RewriteRule ^(.*)$ https://www.logo-foot.com/$1 [R=301,L]

# Redirection des pages de langue non existantes (Soft 404)
RewriteRule ^en/?$ https://www.logo-foot.com/ [R=301,L]
RewriteRule ^ar/?$ https://www.logo-foot.com/ [R=301,L]

# Proxy du sitemap vers l'edge function Supabase
RewriteRule ^sitemap\.xml$ https://awhmodyqxysnqkuczgss.supabase.co/functions/v1/sitemap [P,L]

# ============================================
# REDIRECTIONS SEO - URLs blog non-canoniques
# ============================================

# Rediriger /blog/ID (sans slug) vers /blog/ID-article
# Note: La redirection finale vers le bon slug se fait côté React
RewriteCond %{REQUEST_URI} ^/blog/([0-9]+)/?$
RewriteRule ^blog/([0-9]+)/?$ /blog/$1-article [R=301,L]

# Bloquer les paramètres d'URL inutiles (évite le contenu dupliqué)
RewriteCond %{QUERY_STRING} !^$
RewriteCond %{REQUEST_URI} !^/api/
RewriteRule ^(.*)$ /$1? [R=301,L]

# Rediriger toutes les requêtes vers index.html pour React Router
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]
