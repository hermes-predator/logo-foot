
RewriteEngine On
RewriteBase /

# Redirection 301 de non-www vers www
RewriteCond %{HTTP_HOST} ^logo-foot\.com$ [NC]
RewriteRule ^(.*)$ https://www.logo-foot.com/$1 [R=301,L]

# Redirection des pages de langue non existantes (Soft 404)
RewriteRule ^en/?$ https://www.logo-foot.com/ [R=301,L]
RewriteRule ^ar/?$ https://www.logo-foot.com/ [R=301,L]

# Proxy du sitemap vers l'edge function Supabase
RewriteRule ^sitemap\.xml$ https://awhmodyqxysnqkuczgss.supabase.co/functions/v1/sitemap [P,L]

# ============================================
# REDIRECTIONS SEO - URLs blog
# ============================================
# Note: Les redirections vers le format canonique /blog/ID-slug-court
# sont gérées côté React (BlogPost.tsx) pour utiliser le bon slug du titre.
# Ne PAS rediriger ici vers un format fixe comme -article.

# Bloquer les paramètres d'URL inutiles (évite le contenu dupliqué)
RewriteCond %{QUERY_STRING} !^$
RewriteCond %{REQUEST_URI} !^/api/
RewriteRule ^(.*)$ /$1? [R=301,L]

# Rediriger toutes les requêtes vers index.html pour React Router
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]
